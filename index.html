<!doctype html>
<html>
    <head>
        <link rel="shortcut icon" type="image/png" href="/assets/favicon.png"/>
        <meta charset="utf-8" />
        <title>Swim Team &bull; V</title>
        <meta property="og:image" content="/assets/cover.png">
        <meta property="og:image:type" content="image/png">
        <meta property="og:image:width" content="1400">
        <meta property="og:image:height" content="1400">
        <script src="libs/howler.core.min.js"></script>
        <script src='libs/require-2.3.5.min.js'></script>
        <script src='libs/jquery-1.11.1.min.js'></script>
        <script src="libs/canvas.js"></script>
        <!--

                                                                 ^^
                ^^      ..                                       ..
                        []                                       []
                      .:[]:_          ^^                       ,:[]:.
                    .: :[]: :-.                             ,-: :[]: :.
                  .: : :[]: : :`._                       ,.': : :[]: : :.
                .: : : :[]: : : : :-._               _,-: : : : :[]: : : :.
            _..: : : : :[]: : : : : : :-._________.-: : : : : : :[]: : : : :-._
            _:_:_:_:_:_:[]:_:_:_:_:_:_:_:_:_:_:_:_:_:_:_:_:_:_:_:[]:_:_:_:_:_:_
            !!!!!!!!!!!![]!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!![]!!!!!!!!!!!!!
            ^^^^^^^^^^^^[]^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^[]^^^^^^^^^^^^^
                        []                                       []
                        []                                       []
                        []                                       []
             ~~^-~^_~^~/  \~^-~^~_~^-~_^~-^~_^~~-^~_~^~-~_~-^~_^/  \~^-~_~^-~~-
            ~ _~~- ~^-^~-^~~- ^                    ^- _~~_~-^_ ~^-^~~-_^-~ ~^
               ~ ^- _~~_-  ~~   album art by murat  -  ~ _  ~~^  - ~_   - ~^_~
                 ~-  ^_  ~^ -_~~_ _ - ~^~ _   _~ ~-  _ ~~^ - _ ~ - _ ~~^ -
                    ~^ -_ ~^^      ~^~                 ~- _ ~^ _ -  ~ ^-
                        ~^~ -  ascii art not by murat_- ~_ - ~  ~^_-
                            ~ ~- ^~ -  ~^ -  ~ ^~ - ~~  ^~ - ~

        -->
        <link href="https://fonts.googleapis.com/css?family=Major+Mono+Display" rel="stylesheet">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <style>
            * { margin: 0; padding: 0; }
            html, body {
                width: 100%;
                height: 100%;
                background: #fff;
                font-family: monospace;
            }

            #wrapper {
                position: relative;
                height: 100%;

                background: white;
            }

            #square {
                position: relative;
                height: 100%;
                width: 100%;
            }
            #main {
                position: absolute; top: 50px; bottom: 50px; left: 50px; right: 50px;
            }
            #frame {
                display: block;
                height: 100%; width: 100%;
            }

            .dots { background: #000; }
            img { display: block; }
            .v { width: 10%; position: absolute; right: 5%; bottom: 5%; }


            #tracks { display: none; font-size: 17px; font-family: 'Major Mono Display', monospace;   }
            #tracks ol { margin: 0 70px; padding: 0; font-weight: bold;  }
            #tracks.bottom { display: block; position: relative; margin: 0 10%; padding-bottom: 100px; }


            #tracks.right {
                position: absolute; top: 0; left: 50%; right: 0; height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            #tracks .track { position: relative; cursor: pointer; margin: 20px 0; padding: 0; border-bottom: 1px solid #ddd; min-width: 220px; }
            #tracks .track:hover { border-bottom: 1px solid #000; }
            #tracks .duration { color: #aaa; float: right; font-size: 10px; }
            #tracks .track.loading:after { content: " loading..."; position: absolute; bottom: -13px; left: 0px; font-size: 11px; color: #a00; }
            #tracks .track.playing { font-weight: bold; border-bottom: 1px solid #a00; background-shadow: 0 0 3px 0 red; }
            #tracks .track.playing:before { content: "‖"; width: 30px; height: 30px; text-align: center; position: absolute; left: -80px; top: -1px; }
            #tracks .track.paused:before { content: "▶"; width: 30px; height: 30px; text-align: center; position: absolute; left: -80px; top: -1px; }

            @media screen and (max-width: 600px){
                #main {
                    top: 20px; bottom: 20px; left: 20px; right: 20px;
                }
                #tracks .track { min-width: 160px; }
            }

            #tracks .more {  margin-top: 30px; line-height: 30px; }
            #tracks .more > a { display: block; color: #ccc; text-decoration: none; }
            #tracks .icon { display: inline-block; width: 52.5px; text-align: right; margin-right: 4px; letter-spacing: 2px; }
            #tracks .download { }
            #tracks .download:hover { color: #0a0; cursor: pointer; }
            #tracks .info:hover { color: #00a; cursor: pointer; }
            #tracks .contact:hover { color: #950; cursor: pointer; }

            .expand {
                display: none;
                font-family: sans-serif;
                color: #777;
                font-size: 12px;
                line-height: 17px;
                max-width: 300px;
            }
            .expand p { margin: 5px 0 0 20px; }
            .expand a { color: #333; }

            #bandname {
                position: absolute; top: 0; left: 0;
                    cursor: pointer;
            }
            #bandname:hover svg * {
                fill: #a00 !important;
            }
            #bandname:active svg * {
                fill: #00a !important;
            }
            #bandname:active  {
                top: 1px; left: 1px;
            }
            #bandname svg { height: 15px; padding: 10px; display: none;}

            #bandname { font-family: 'Major Mono Display', monospace; color: #ccc; font-size: 20px; text-decoration: none; padding: 10px; }
            #bandname:hover { color: #00f; }

        </style>
    </head>
    <body>
        </div>
        <div id="wrapper">
            <div id="square">
                <div id="main">
                    <div id="frame"></div>
                    <img class='v' src='./assets/v.svg?' />
                </div>
            </div>
            <div id="tracks">
                <div class='inner'>
                    <ol></ol>
                    <div class='more'>
                        <a class='download' href='https://s3.amazonaws.com/swim-team/Swim+Team+-+V.zip'>
                            <span class='icon'>&#8681;.</span> download
                        </a>
                        <a class='info'>
                            <span class='icon'>ⓘ.</span> info
                        </a>
                        <div class='expand'>
                            <p>Swim Team is a rock trio from Vancouver, BC consisting of members Dorothy Neufeld, Murat Ayfer, and Nick Short.</p>
                            <p>V is the third release, self-recorded and produced from Sept 2017 - Oct 2018.</p>
                            <p>Mastered by Jordan Koop.</p>
                            <p>Find us at <a href='mailto:swim.team.van@gmail.com'>swim.team.van@gmail.com</a> or <a href='http://swim-team.bandcamp.com'>Bandcamp</a></p>
                            <p>2019 &copy; All rights reserved</p>
                        </div>
                    </div>
                </div>
            </div>
            <a id="bandname" href="">
                swim team
                <svg viewBox="0 0 276 41" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" xmlns:serif="http://www.serif.com/" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:1.41421;"><g><path d="M14.209,38.174c0.957,0 1.904,-0.132 2.842,-0.396c0.937,-0.263 1.777,-0.654 2.519,-1.172c0.742,-0.517 1.338,-1.152 1.787,-1.904c0.45,-0.752 0.674,-1.626 0.674,-2.622c0,-1.191 -0.307,-2.251 -0.923,-3.179c-0.615,-0.927 -1.42,-1.777 -2.417,-2.548c-0.996,-0.772 -2.133,-1.499 -3.413,-2.183c-1.279,-0.684 -2.583,-1.367 -3.911,-2.051c-1.328,-0.683 -2.632,-1.401 -3.911,-2.153c-1.279,-0.752 -2.417,-1.592 -3.413,-2.52c-0.996,-0.927 -1.802,-1.963 -2.417,-3.105c-0.615,-1.143 -0.923,-2.456 -0.923,-3.941c0,-1.484 0.278,-2.861 0.835,-4.13c0.557,-1.27 1.372,-2.369 2.446,-3.296c1.075,-0.928 2.398,-1.656 3.97,-2.183c1.572,-0.527 3.374,-0.791 5.405,-0.791c1.836,0 3.477,0.195 4.922,0.586c1.446,0.391 2.715,0.967 3.809,1.728c1.094,0.762 2.021,1.7 2.783,2.813c0.762,1.113 1.377,2.402 1.846,3.867l-3.34,1.524c-0.391,-1.192 -0.889,-2.281 -1.494,-3.267c-0.606,-0.986 -1.328,-1.831 -2.168,-2.534c-0.84,-0.703 -1.812,-1.245 -2.915,-1.626c-1.104,-0.381 -2.349,-0.571 -3.736,-0.571c-1.23,0 -2.304,0.17 -3.222,0.512c-0.918,0.342 -1.685,0.791 -2.3,1.348c-0.615,0.557 -1.074,1.182 -1.377,1.875c-0.303,0.693 -0.454,1.401 -0.454,2.124c0,1.016 0.312,1.948 0.937,2.798c0.625,0.849 1.455,1.65 2.491,2.402c1.035,0.752 2.212,1.48 3.53,2.183c1.318,0.703 2.661,1.416 4.028,2.138c1.367,0.723 2.71,1.475 4.029,2.256c1.318,0.782 2.495,1.636 3.53,2.564c1.035,0.927 1.865,1.943 2.49,3.047c0.625,1.103 0.938,2.338 0.938,3.706c0,1.543 -0.293,2.993 -0.879,4.35c-0.586,1.358 -1.465,2.539 -2.637,3.545c-1.172,1.006 -2.627,1.802 -4.365,2.388c-1.739,0.586 -3.76,0.879 -6.065,0.879c-1.875,0 -3.545,-0.205 -5.01,-0.615c-1.464,-0.411 -2.758,-1.006 -3.881,-1.788c-1.123,-0.781 -2.085,-1.733 -2.886,-2.856c-0.801,-1.123 -1.455,-2.407 -1.963,-3.853l3.486,-1.435c0.41,1.269 0.962,2.402 1.656,3.398c0.693,0.996 1.499,1.841 2.417,2.535c0.918,0.693 1.938,1.225 3.061,1.596c1.123,0.371 2.319,0.557 3.589,0.557Z" style="fill-rule:nonzero;"/><path d="M36.744,8.648l9.281,23.625l8.157,-21.328l8.414,21.422l9.07,-23.719l2.531,0l-11.953,31.336l-1.547,0l-7.687,-19.382l-7.36,19.382l-1.781,0l-12.351,-31.336l5.226,0Z" style="fill-rule:nonzero;"/><rect x="78.463" y="8.648" width="5.227" height="31.078" style="fill-rule:nonzero;"/><path d="M92.127,8.648l5.344,0l12.093,23.836l0.258,0l11.86,-23.836l5.25,0l0,31.079l-5.25,0l0,-25.477l-0.164,0l-12.75,25.477l-1.079,0l-12.89,-25.266l-0.352,0l0,25.266l-2.32,0l0,-31.079Z" style="fill-rule:nonzero;"/><path d="M176.766,0.879l0,2.519l-14.063,0l0,36.329l-6.533,0l0,-36.329l-14.063,0l0,-2.519l34.659,0Z" style="fill-rule:nonzero;"/><path d="M203.707,8.648l0,2.016l-16.383,0l0,11.109l10.969,0l0,2.016l-10.969,0l0,13.922l16.383,0l0,2.016l-21.609,0l0,-31.079l21.609,0Z" style="fill-rule:nonzero;"/><path d="M222.012,7.945l14.625,31.782l-5.321,0l-4.734,-10.36l-13.336,0l-4.898,10.36l-2.625,0l14.976,-31.782l1.313,0Zm-7.852,19.407l11.461,0l-5.648,-12.305l-5.813,12.305Z" style="fill-rule:nonzero;"/><path d="M240.949,8.648l5.344,0l12.094,23.836l0.258,0l11.859,-23.836l5.25,0l0,31.079l-5.25,0l0,-25.477l-0.164,0l-12.75,25.477l-1.078,0l-12.891,-25.266l-0.351,0l0,25.266l-2.321,0l0,-31.079Z" style="fill-rule:nonzero;"/></g></svg>
            </a>
        </div>
        <script>

            var extend = function(dest, from) {
                var props = Object.getOwnPropertyNames(from);
                props.forEach(function(name) {
                    if (name in dest) {
                        var destination = Object.getOwnPropertyDescriptor(from, name);
                        Object.defineProperty(dest, name, destination);
                    }
                });
                return dest;
            };

            function loadapp(name) {
                var file = "" + name + ".js";
                requirejs([file], function(lib) {
                    app = new lib($('#frame').get(0));
                });
            }

            $(document).ready(function(){
                window.app = null;

                var maxlenpx = Math.min($('#square').innerHeight(), $('#square').innerWidth());
                $('#square').css('width', parseInt(maxlenpx)+"px");
                $('#square').css('height', parseInt(maxlenpx)+"px");

                window.app = loadapp('circles');


                $('#nav a').on('click', function(e){
                    e.preventDefault();
                    var name = $(this).attr('name');
                    loadapp(name);
                });

                $('.info').on('click', function(e) {
                    e.preventDefault();
                    $('.expand').toggle();
                });
            });
        </script>
        
        <script>
            $(document).ready(function () {

                var resize = function() {
                    if (window.app) window.app.resize();
                    if($(document).height() - $(document).width() < -300) {
                        $('#tracks').removeClass('bottom');
                        $('#tracks').addClass('right');
                    } else {
                        $('#tracks').addClass('bottom');
                        $('#tracks').removeClass('right');
                    }
                }
                resize();
                
                window.addEventListener('resize', function(e){
                    resize()
                });

                var tracks = [
                    {title: 'Brick', id: 'brick', files: [
                        //'https://s3.amazonaws.com/swim-team/01+-+Brick.m4a',
                        'https://s3.amazonaws.com/swim-team/01+-+Brick.mp3',
                    ], duration: '3:18'},
                    {title: 'x', id: 'x', files: [
                        //'https://s3.amazonaws.com/swim-team/02+-+X.m4a',
                        'https://s3.amazonaws.com/swim-team/02+-+X.mp3',
                    ], duration: '2:58'},
                    {title: 'Garden', id: 'garden', files: [
                        //'https://s3.amazonaws.com/swim-team/03+-+Garden.m4a',
                        'https://s3.amazonaws.com/swim-team/03+-+Garden.mp3',
                    ], duration: '3:20'},
                    {title: 'Empire', id: 'empire', files: [
                        //'https://s3.amazonaws.com/swim-team/04+-+Empire.m4a',
                        'https://s3.amazonaws.com/swim-team/04+-+Empire.mp3',
                    ], duration: '2:50'},
                    {title: 'Rabbit', id: 'rabbit', files: [
                        //'https://s3.amazonaws.com/swim-team/05+-+Rabbit.m4a',
                        'https://s3.amazonaws.com/swim-team/05+-+Rabbit.mp3',
                    ], duration: '2:57'},
                    {title: 'Mango', id: 'mango', files: [
                        //'https://s3.amazonaws.com/swim-team/06+-+Mango.m4a',
                        'https://s3.amazonaws.com/swim-team/06+-+Mango.mp3',
                    ], duration: '2:41'},
                    {title: 'Firefly', id: 'firefly', files: [
                        //'https://s3.amazonaws.com/swim-team/07+-+Firefly.m4a',
                        'https://s3.amazonaws.com/swim-team/07+-+Firefly.mp3',
                    ], duration: '3:11'},
                    {title: 'Cardinal', id: 'cardinal', files: [
                        //'https://s3.amazonaws.com/swim-team/08+-+Cardinal.m4a',
                        'https://s3.amazonaws.com/swim-team/08+-+Cardinal.mp3',
                    ], duration: '3:06'},
                    {title: 'v', id: 'v', files: [
                        //'https://s3.amazonaws.com/swim-team/09+-+V.m4a',
                        'https://s3.amazonaws.com/swim-team/09+-+V.mp3',
                    ], duration: '5:03'},
                    {title: 'Tendency', id: 'tendency', files: [
                        //'https://s3.amazonaws.com/swim-team/10+-+Tendency.m4a',
                        'https://s3.amazonaws.com/swim-team/10+-+Tendency.mp3',
                    ], duration: '3:10'},
                ];

                var sounds = {};
                
                tracks.forEach(function(track, index){
                    var sound = new Howl({
                      src: track.files,
                      preload: false,
                      html5: true,
                    });

                    sound.identifier = track.id;
                    sound.on('load', function(){
                        var elem = $('#'+this.identifier)
                        elem.removeClass('loading');
                    });
                    sound.on('play', function(){
                        var elem = $('#'+this.identifier)
                        elem.removeClass('loading');
                        elem.removeClass('paused');
                        elem.addClass('playing');
                    });
                    sound.on('stop', function(){
                        var elem = $('#'+this.identifier)
                        elem.removeClass('playing');
                        elem.removeClass('loading');
                        elem.removeClass('paused');
                    });
                    sound.on('pause', function(){
                        var elem = $('#'+this.identifier)
                        elem.removeClass('playing');
                        elem.removeClass('loading');
                        elem.addClass('paused');
                    });
                    sound.on('end', function(){
                        var elem = $('#'+this.identifier)
                        this.stop();
                        var next = elem.next('.track');
                        if(next.length) next.click();
                    });

                    sounds[track.id] = sound;

                    var trackdiv = $("<li class='track' id='"+track.id+"'>"+track.title+" <span class='duration'>"+track.duration+"</span></li>")
                    $('#tracks ol').append(trackdiv);
                });


                var stop_all = function() {
                    for(var trackid in sounds) {
                        sounds[trackid].stop();
                    }
                }

                $('#tracks').on('click', '.track', function(e){
                    var trackid = $(this).attr('id');
                    var elem = $(this);
                    var sound = sounds[trackid];

                    if(sound.playing()) {
                        sound.pause();
                    } else if($(this).hasClass('paused')) {
                        sound.play();
                    } else {
                        stop_all();
                        sound.play();
                        window.playing_track = sound;

                        if(sound.state() != 'loaded') {
                            elem.addClass('loading');
                        }
                    }
                });

                $('body').keyup(function(e){
                    if(e.keyCode == 32){
                        // user has pressed space
                        if(window.playing_track) {
                            if(window.playing_track.playing()) {
                                window.playing_track.pause();
                            } else {
                                window.playing_track.play();
                            }
                        }
                    }
                });
            });
        </script>
        
    </body>
</html>
