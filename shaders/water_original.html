<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>Moire</title>

        <script type="text/javascript" src="GlslCanvas.js"></script>

        <style>
            body {
                background: #101515;
            }

            #glslCanvas {
                position: absolute;
                top: 50%;
                left: 50%;
                transform: translate(-50%,-50%);
            }

        </style>

    </head>
    <body>
        <canvas id="glslCanvas" data-fragment="


#define PI 3.14159265359
#define TWO_PI 6.28318530718

#ifdef GL_ES
precision mediump float;
#endif

uniform vec2 u_resolution;
uniform float u_time;


float csin(float x) {
    return sin(sin(x));
}

float water(vec2 st) {
    float num_lines = floor(u_resolution.y / 15.0);

    float tilt = 1.0 + (sin(u_time/8.) * sin( -cos(st.x) * u_time/2. * 5.0 + st.y * 10.0)) / 2.0;
    float lines = pow(st.y, 4.0) * num_lines;
    lines = pow(   (1.+(csin(u_time/8.)) / 2.) , 0.1) * (( tilt) + sin(u_time - (1.0-st.x)*st.y * 100.0) * sin(st.y * 200.0) * sin(u_time/8.0) ) + lines;
    float elect = sin(lines);
    float brightness = floor(elect + st.x) * (1.-st.y*1.3);

    brightness = brightness + pow(sin( st.x * PI ), 4.0) * (st.x * brightness);
    return brightness;
}


void main() {
	vec2 st = gl_FragCoord.xy/u_resolution.xy;

    float brightness = water(st);
    float brightness2 = water(st + 0.005) * water(st/1.3 - 0.02) * 2.2;
    float brightness3 = water(st - 0.005) * 2.0;

    vec4 color = vec4(brightness, brightness2, brightness3, 1.0);
	gl_FragColor = color;
}

" width="800" height="600"></canvas>
    </body>

    <script>
        var canvas = document.getElementById("glslCanvas");
        var sandbox = new GlslCanvas(canvas);
        var texCounter = 0;
        var sandbox_content = "";
        var sandbox_title = "";
        var sandbox_author = "";
        var sandbox_thumbnail = ""; 
        canvas.style.width = '100%';
        canvas.style.height = '100%';

    </script>
</html>
